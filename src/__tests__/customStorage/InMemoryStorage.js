var e=require("tslib").__spreadArrays;exports.__esModule=!0;exports.inMemoryStorageFactory=void 0;var r={};Object.defineProperty(r,"__esModule",{value:!0});var t=(n=void 0,i=r.endsWith=n,o=r.find=i,s=r.findIndex=o,u=r.forOwn=s,a=r.get=u,f=r.groupBy=a,c=r.isBoolean=f,l=r.isFiniteNumber=c,v=r.isIntegerNumber=l,m=r.isNaNNumber=v,_=r.isObject=m,h=r.isString=_,g=r.merge=h,d=r.shallowClone=g,b=r.startsWith=d,P=r.toNumber=b,N=r.toString=P,A=r.uniq=N,r.uniqAsStrings=A);r.uniqueId=t;var n=function(e,r,t){return void 0===t&&(t=!1),!(!p(e)||!p(r))&&(t&&(e=e.toLowerCase(),r=r.toLowerCase()),e.slice(e.length-r.length)===r)};r.endsWith=n;var i=function(e,r){var t;if(y(e))for(var n=Object.keys(e),i=0;i<n.length&&!t;i++){var o=n[i];r(e[o],o,e)&&(t=e[o])}else if(Array.isArray(e))for(i=0;i<e.length&&!t;i++){r(e[i],i,e)&&(t=e[i])}return t};r.find=i;var o=function(e,r){if(Array.isArray(e)&&"function"==typeof r)for(var t=0;t<e.length;t++)if(!0===r(e[t],t,e))return t;return-1};r.findIndex=o;var s=function(e,r){return Object.keys(e).forEach((function(t){return r(e[t],t,e)})),e};r.forOwn=s;var u=function(e,r,t){var n=t;try{var i=r.split("."),o=e;i.forEach((function(e){return o=o[e]})),void 0!==o&&(n=o)}catch(e){}return n};r.get=u;var a=function(e,r){var t={};if(Array.isArray(e)&&p(r))for(var n=0;n<e.length;n++){var i=e[n][r];p(i)&&(t[i]||(t[i]=[]),t[i].push(e[n]))}return t};r.groupBy=a;var f=function(e){return!0===e||!1===e};r.isBoolean=f;var c=function(e){return e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&(Number.isFinite?Number.isFinite(e):isFinite(e))};r.isFiniteNumber=c;var l=function(e){return e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&(Number.isInteger?Number.isInteger(e):isFinite(e)&&Math.floor(e)===e)};r.isIntegerNumber=l;var v=function(e){return e instanceof Number&&(e=e.valueOf()),e!=e};function y(e){return null!==e&&"object"==typeof e&&e.constructor===Object}r.isNaNNumber=v;var m=y;function p(e){return"string"==typeof e||e instanceof String}r.isObject=m;var _=p;r.isString=_;var h=function r(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=t;if(y(n)&&Object.keys(n).forEach((function(e){var t=n[e];y(t)&&(t=s[e]&&y(s[e])?r({},s[e],t):r({},t)),void 0!==t&&(s[e]=t)})),i&&i.length){var u=i.splice(0,1)[0];s=r.apply(void 0,e([s,u],i))}return s};r.merge=h;var g=function(e){for(var r=Object.keys(e),t={},n=0;n<r.length;n++)t[r[n]]=e[r[n]];return t};r.shallowClone=g;var d=function(e,r){return!(!p(e)||!p(r))&&e.slice(0,r.length)===r};r.startsWith=d;var b=function(e){if("number"==typeof e)return e;if(y(e)&&"function"==typeof e.valueOf){var r=e.valueOf();e=y(r)?r+"":r}return"string"!=typeof e?0===e?e:+e:+(e=e.replace(/^\s+|\s+$/g,""))};r.toNumber=b;var P=function(e){if(null==e)return"";if("string"==typeof e)return e;if(Array.isArray(e))return e.map((function(e){return p(e)?e:""}))+"";var r=e+"";return"0"===r&&1/e===Number.NEGATIVE_INFINITY?"-0":r};r.toString=P;var N=function(e){var r={};return e.filter((function(e){return!Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=!0)}))};r.uniq=N;var A=function(e,r){void 0===r&&(r=JSON.stringify);var t={};return e.filter((function(e){var n=r(e);return!Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=!0)}))};r.uniqAsStrings=A;var O=-1;t=function(){return O++},r.uniqueId=t;var S={};Object.defineProperty(S,"__esModule",{value:!0});var j=(w=void 0,k=S.SetPoly=w,E=S.setToArray=k,S.__getSetConstructor=E);S._Set=j;var I=function(){function e(e){var r=this;this.__setData__=[],Array.isArray(e)&&e.forEach((function(e){r.add(e)}))}return e.prototype.clear=function(){this.__setData__.length&&(this.__setData__.length=0)},e.prototype.add=function(e){return this.has(e)||this.__setData__.push(e),this},e.prototype.delete=function(e){var r=this.__setData__.indexOf(e);return-1!==r&&(this.__setData__.splice(r,1),!0)},e.prototype.has=function(e){return-1!==this.__setData__.indexOf(e)},e.prototype.forEach=function(e,r){if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var t=0;t<this.__setData__.length;t++){var n=this.__setData__[t];e.call(r,n,n,this)}},Object.defineProperty(e.prototype,"size",{get:function(){return this.__setData__.length},enumerable:!1,configurable:!0}),e}(),w=I;S.SetPoly=w;var k=function(e){return e instanceof I?e.__setData__.slice():Array.from(e)};function D(){return"function"==typeof Array.from&&"function"==typeof Set&&Set.prototype&&Set.prototype.values?Set:I}S.setToArray=k;var E=D;S.__getSetConstructor=E,j=D(),S._Set=j;var x,C={_cache:x={},get:function(e){return Promise.resolve(e in x?x[e]:null)},set:function(e,r){var t=e in x;return x[e]=r,Promise.resolve(t)},getAndSet:function(e,r){var t=e in x?x[e]:null;return x[e]=r,Promise.resolve(t)},del:function(e){var r=e in x;return delete x[e],Promise.resolve(r)},getKeysByPrefix:function(e){return Promise.resolve(Object.keys(x).filter((function(t){return r.startsWith(t,e)})))},getByPrefix:function(e){return Promise.resolve(Object.keys(x).filter((function(t){return r.startsWith(t,e)})).map((function(e){return x[e]})))},incr:function(e){if(e in x){var t=r.toNumber(x[e])+1;if(isNaN(t))return Promise.resolve(!1);x[e]=t+""}else x[e]="1";return Promise.resolve(!0)},decr:function(e){if(e in x){var t=r.toNumber(x[e])-1;if(isNaN(t))return Promise.resolve(!1);x[e]=t+""}else x[e]="-1";return Promise.resolve(!0)},getMany:function(e){return Promise.resolve(e.map((function(e){return x[e]?x[e]:null})))},pushItems:function(e,r){e in x||(x[e]=[]);var t=x[e];return Array.isArray(t)?(t.push.apply(t,r),Promise.resolve()):Promise.reject("key is not a list")},popItems:function(e,r){var t=x[e];return Promise.resolve(Array.isArray(t)?t.splice(0,r):[])},getItemsCount:function(e){var r=x[e];return Promise.resolve(Array.isArray(r)?r.length:0)},itemContains:function(e,r){var t=x[e];return t?t instanceof Set?Promise.resolve(t.has(r)):Promise.reject("key is not a set"):Promise.resolve(!1)},addItems:function(e,r){e in x||(x[e]=new Set);var t=x[e];return t instanceof Set?(r.forEach((function(e){return t.add(e)})),Promise.resolve()):Promise.reject("key is not a set")},removeItems:function(e,r){e in x||(x[e]=new Set);var t=x[e];return t instanceof Set?(r.forEach((function(e){return t.delete(e)})),Promise.resolve()):Promise.reject("key is not a set")},getItems:function(e){var r=x[e];return r?r instanceof Set?Promise.resolve(S.setToArray(r)):Promise.reject("key is not a set"):Promise.resolve([])},connect:function(){return Promise.resolve()},close:function(){return Promise.resolve()}};exports.default=C;
//# sourceMappingURL=cli.js.map
